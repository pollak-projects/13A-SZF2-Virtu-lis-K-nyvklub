<!DOCTYPE html>
<html lang="hu" data-bs-theme="dark">
  <head>
    <%- include('partials/header', {title: "Jelszóváltoztatás"} ) %>
  </head>
  <body class="text-light">
    <div
      class="container d-flex justify-content-center align-items-center min-vh-100">
      <form
        class="card p-4 shadow-lg"
        style="width: 350px"
        onsubmit="return false;">
        <h3 class="text-center mb-4">Jelszó helyreállítása</h3>
        <div class="mb-3">
          <label for="new-password" class="form-label">Új jelszó</label>
          <input
            type="password"
            id="new-password"
            required
            class="form-control"/>
        </div>
        <div class="mb-3">
          <label for="confirm-password" class="form-label"
            >Új jelszó újra</label>
          <input
            type="password"
            id="confirm-password"
            required
            class="form-control"/>
        </div>
        <div class="mb-3">
          <input
            type="checkbox"
            id="show-password"
            onclick="togglePasswordVisibility()"/>
          <label for="show-password" class="form-label">Jelszó mutatása</label>
        </div>
        <div class="d-flex justify-content-center">
          <button
            class="btn btn-primary w-100"
            onclick="submitChangePassword()">
            Jelszó változtatása
          </button>
        </div>
        <div
          id="error-message"
          class="mt-3 text-danger text-center"
          style="display: none">
          A két jelszó nem egyezik!
        </div>
      </form>
    </div>

    <script>
      function togglePasswordVisibility() {
        const newPasswordField = document.getElementById("new-password");
        const confirmPasswordField =
          document.getElementById("confirm-password");
        const showPasswordCheckbox = document.getElementById("show-password");

        if (showPasswordCheckbox.checked) {
          newPasswordField.type = "text";
          confirmPasswordField.type = "text";
        } else {
          newPasswordField.type = "password";
          confirmPasswordField.type = "password";
        }
      }

      function submitChangePassword() {
        const newPassword = document.getElementById("new-password").value;
        const confirmPassword =
          document.getElementById("confirm-password").value;
        const errorMessage = document.getElementById("error-message");

        if (newPassword !== confirmPassword) {
          errorMessage.style.display = "block";
        } else {
          errorMessage.style.display = "none";

          alert("Jelszó sikeresen megváltoztatva!");
        }
      }
    </script>
  </body>
</html>
